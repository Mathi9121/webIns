{% extends '::app.html.twig' %}

{% block stylesheets %}
  {{parent()}}
  {% stylesheets
    '%kernel.root_dir%/Resources/public/css/dataTables.min.css'
    filter='cssrewrite' %}
  <link rel="stylesheet" type="text/css" charset="UTF-8" media="all" href="{{ asset_url }}"/>
  {% endstylesheets %}
{% endblock %}

{% block  javascripts %}
{{parent()}}
{% javascripts
'%kernel.root_dir%/Resources/public/js/dataTables.min.js'
%}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
<script>
$(document).ready(function() {

  //init de datatables.js
  var datatable = $('#datatable').dataTable({
    // "ajax": "data/arrays.txt"
    language: {
      "sProcessing":     "Traitement en cours...",
      "sSearch":         "Rechercher&nbsp;:",
      "sLengthMenu":     "Afficher _MENU_ &eacute;l&eacute;ments",
      "sInfo":           "Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",
      "sInfoEmpty":      "Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",
      "sInfoFiltered":   "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
      "sInfoPostFix":    "",
      "sLoadingRecords": "Chargement en cours...",
      "sZeroRecords":    "Aucun &eacute;l&eacute;ment &agrave; afficher",
      "sEmptyTable":     "Aucune donn&eacute;e disponible dans le tableau",
      "oPaginate": {
        "sFirst":      "Premier",
        "sPrevious":   "Pr&eacute;c&eacute;dent",
        "sNext":       "Suivant",
        "sLast":       "Dernier"
      },
      "oAria": {
        "sSortAscending":  ": activer pour trier la colonne par ordre croissant",
        "sSortDescending": ": activer pour trier la colonne par ordre d&eacute;croissant"
      }
    },
    "columnDefs": [ { "targets": 8, "orderable": false } ],
    "order": [[ 0, "desc" ]],
    'sDom': 'ltipr',
  });

$('#search-box').keyup(function(e){
  datatable.fnFilter( $(this).val() );
});

});


</script>
{% endblock %}

{% block title %}Liste des contacts{% endblock %}
{% block titre %}Liste des contacts{% endblock %}

{% block controls %}
<input type='search' id="search-box"/>
{% endblock %}

{% block body -%}
  <div class="panel">
  <div class="panel-body">
    <div class="table-container">
    <table class="table-bordered" id="datatable">
        <thead>
            <tr>
                <th>Id</th>
                <th>Civilit√©</th>
                <th>Nom</th>
                <th>Prenom</th>
                <th>Fonction</th>
                <th>Tel</th>
                <th>Mail</th>
                <th>Type</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
          {% for entity in entities %}
            {% if entity.nom is not null %}
              <tr>
                  <td>{{ entity.id }}</td>
                  <td>{{ entity.civilite }}</td>
                  <td>{{ entity.nom }}</td>
                  <td>{{ entity.prenom }}</td>
                  <td>{{ entity.fonction }}</td>
                  <td>{{ entity.tel }}</td>
                  <td>{{ entity.mail }}</td>
                  <td>{{ entity.type }}</td>
                  <td>
  						      <a href="
                      {% if(entity.type == 'intervenant') %}
                        {{ path('personne_show', { 'id': entity.id }) }}
                      {% else %}
                        {{ path('inscription_show', { 'idformation': entity.inscription.0.id ,'id': entity.inscription.0.id, 'type':entity.type}) }}#{{entity.type}}
                      {% endif %}
                      ">
                      <span class="fa-stack">
                        <i class="fa fa-square fa-stack-2x"></i>
                        <i class="fa fa-info fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </td>
                </tr>
            {% endif %}
          {% endfor %}
        </tbody>
    </table>
  </div>
  </div>
  </div>
{% endblock %}
